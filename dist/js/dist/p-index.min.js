var page={};page.start=function(){"use strict";page.watch(),page.initialize()},page.initialize=function(){"use strict";$(".m-equipList .equipTable tbody tr").first().click()},page.watch=function(){"use strict";var a=null,b=null,c=$(".m-equipList .equipTable tbody tr"),d=$(".m-equipDetail .equipStatusDropdown select"),e=$(".m-equipDetail .equipCommentInput textarea"),f=$(".m-equipDetail .equipCommentInput .submit");c.click(function(){page.refresh_equipDetail($(this))}),d.click(function(){a=$(this).val()}),d.change(function(){b=$(this).val(),page.update_db_equipStatus(d,a)}),f.click(function(){var a=e.val();page.insert_db_equipComment(a)})},page.insert_db_equipComment=function(a){"use strict";function b(){$.ajax({type:"POST",url:"php/dist/sql-insert-equipComment.php",data:{equipID:c,equipComment:d.equipComment},dataType:"json",success:function(a){if("success"===a.status)var b='<h3 style="text-align:center;">Successfully update equipment status.</h3>';else{var b='<h3 style="text-align:center;">There was a problem. Database not updated.</h3>';bootstrapDialog("error",b)}m_equipDetail.commentList_populate(c),e.val("")},error:function(a,b,c){var d="Status: "+b+"\nError: "+c;bootstrapDialog("error",d)}})}var c=page.get_equipID(),d={},e=$(".m-equipDetail .equipCommentInput textarea");return m_equipDetail.commentAdd_validate()?(d=m_equipDetail.commentAdd_parse(),void b()):!1},page.update_db_equipStatus=function(a,b){"use strict";function c(){$.ajax({type:"POST",url:"php/dist/sql-update-equipStatus.php",data:{equipID:d,equipStatus:e},dataType:"json",success:function(a){if("success"===a.status)page.refresh_equipList_equipStatus(d);else{var b='<h3 style="text-align:center;">There was a problem. Database not updated.</h3>';bootstrapDialog("error",b)}},error:function(a,b,c){var d="Status: "+b+"\nError: "+c;bootstrapDialog("error",d)}})}var d=page.get_equipID(),e=a.val();c()},page.get_equipID=function(){"use strict";var a=$(".m-equipList .equipTable .highlight").parent(),b=a.attr("class").split(" "),c=null;return $.each(b,function(a,b){"equipID"===b.substring(0,7)&&(c=b.substring(b.indexOf("-")+1))}),c},page.refresh_equipDetail=function(a){"use strict";var b=null;$(".m-equipList .equipTable .highlight").removeClass("highlight"),a.find(".equipName").addClass("highlight");var c=a.attr("class").split(" ");$.each(c,function(a,c){"equipID"===c.substring(0,7)&&(b=c.substring(c.indexOf("-")+1))}),m_equipDetail.commentList_populate(b),$.ajax({type:"POST",url:"php/dist/sql-read-equipDetail.php",data:{equipID:b},dataType:"json",success:function(a){$(".m-equipDetail .equipName").html(a.equipName),$(".m-equipDetail .equipStatusDropdown select").val(a.equipStatus)},error:function(a,b,c){var d="Status: "+b+"\nError: "+c;bootstrapDialog("error",d)}})},page.refresh_equipList_equipStatus=function(a){"use strict";function b(a,b){var c=$(".m-equipList .equipTable tbody .equipID-"+a+" .status");c.css("background-color",b)}$.ajax({type:"POST",url:"php/dist/sql-read-equipDetail.php",data:{equipID:a},dataType:"json",success:function(c){b(a,c.statusColor)},error:function(a,b,c){var d="Status: "+b+"\nError: "+c;bootstrapDialog("error",d)}})},page.start();